{% extends "base.html" %}
{% block title %} Emissions {% endblock %}
{% block content %}
<h3>Emissions Estimation</h3>
  <p>Emissions Estimation will display a heat map of Colorado by zip code with the data from out database. It will then take in the user region ID and display emissions totals and holistic metrics. It will also have an option to download the data from our database?</p> 

  <iframe src="http://tinyfeettoolkit.com/map/" style="height:45vw;width:100%;" title="Iframe Example"></iframe>
  <br>
  <br>
  <br>
  
  <!-- User Region Input -->
  <form action="Gillian-test-3.php" method="post">
      <div>
        <label>Zip Code/City/County</label>
        <input type="number" name="region_ID" placeholder="Enter Location">
        <input type="submit" name="submit_location" value="Submit">
      </div>
      <br>
    </form>
    <form action="Gillian-test-3.php" method="post">
    </form>
<!--Output-->
<br>
<p>Total Region Emissions:</p>
<br>

<!--PIE CHART start-->
<!--Pull Sector Totals for zipcode and use here-->
<body>

  <p>Region Emissions by Sector:</p>
  
  <div id="piechart"></div>
  
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  
  <script type="text/javascript">
  // Load google charts
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);
  
  // Draw the chart and set the chart values
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
    ['Sector', 'CO2e Emissions'],
    ['Cement and Manufacturing', 8],
    ['Waste', 2],
    ['Energy - Electricity', 4],
    ['Energy - Natural Gas', 2],
    ['Transportation', 8]
  ]);
  
    // Optional; add a title and set the width and height of the chart
    var options = {'title':'Region Emissions by Sector', 'width':550, 'height':400};

    var options = {backgroundColor: '#e6ffe6',
                       'width':400,
                       'height':300};
  
    // Display the chart inside the <div> element with id="piechart"
    var chart = new google.visualization.PieChart(document.getElementById('piechart'));
    chart.draw(data, options);
  }
  </script>
  
  </body>
<!--PIE CHART end-->

<br>
<p>Region Holistic Community Metrics:</p>
<br>
  <!--Download Button-->
  <button class="btn"><i class="fa fa-download"></i> Download All Data</button>
</div>

<div class="schema" id="electricity" style="display:none">
    <h2>electricity</h2>
    <table class="styled-table">
      <tr>
        <th>zip</th>
        <th>service_id</th>
        <th>service</th>
        <th>state</th>
        <th>primary_city</th>
        <th>zip_type</th>
        <th>service_pop</th>
        <th>zip_pop</th>
        <th>zip_business_pop_industrial_service</th>
        <th>zip_business_pop_industrial</th>
        <th>commercial_business_zip_pop</th>
        <th>service_commercial_zip_pop</th>
        <th>cntrl_area</th>
        <th>residential_sales_mwh</th>
        <th>industrial_sales_mwh</th>
        <th>commercial_sales_mwh</th>
        <th>commercial_co2e_service_total</th>
        <th>commercial_co2e_kg_per_year_per_zip</th>
        <th>commercial_co2e_metric_tons_per_year_per_zip</th>
        <th>industrial_co2e_service_total</th>
        <th>industrial_co2e_kg_per_year_per_zip</th>
        <th>industrial_co2e_metric_tons_per_year_per_zip</th>
        <th>residential_co2e_service_total</th>
        <th>residential_co2e_kg_per_year_per_zip</th>
        <th>residential_co2e_metric_tons_per_year_per_zip</th>
      </tr>
      {% for row in Electricity %}
      <tr>
        <td>{{row.zip}}</td>
        <td>{{row.service_id}}</td>
        <td>{{row.service}}</td>
        <td>{{row.state}}</td>
        <td>{{row.primary_city}}</td>
        <td>{{row.zip_type}}</td>
        <td>{{row.service_pop}}</td>
        <td>{{row.zip_pop}}</td>
        <td>{{row.zip_business_pop_industrial_service}}</td>
        <td>{{row.zip_business_pop_industrial}}</td>
        <td>{{row.commercial_business_zip_pop}}</td>
        <td>{{row.service_commercial_zip_pop}}</td>
        <td>{{row.cntrl_area}}</td>
        <td>{{row.residential_sales_mwh}}</td>
        <td>{{row.industrial_sales_mwh}}</td>
        <td>{{row.commercial_sales_mwh}}</td>
        <td>{{row.commercial_co2e_service_total}}</td>
        <td>{{row.commercial_co2e_kg_per_year_per_zip}}</td>
        <td>{{row.commercial_co2e_metric_tons_per_year_per_zip}}</td>
        <td>{{row.industrial_co2e_service_total}}</td>
        <td>{{row.industrial_co2e_kg_per_year_per_zip}}</td>
        <td>{{row.industrial_co2e_metric_tons_per_year_per_zip}}</td>
        <td>{{row.residential_co2e_service_total}}</td>
        <td>{{row.residential_co2e_kg_per_year_per_zip}}</td>
        <td>{{row.residential_co2e_metric_tons_per_year_per_zip}}</td>
      </tr>
      {% endfor %}
    </table>
  </div>

<div class="schema" id="natural_gas" style="display:none">
  <h2>natural_gas</h2>
  <table class="styled-table">
    <tr>
      <th>zip</th>
      <th>residential_volume</th>
      <th>commercial_volume</th>
      <th>industrial_volume</th>
    </tr>
    {% for row in Natural_gas %}
    <tr>
      <td>{{row.zip}}</td>
      <td>{{row.residential_volume}}</td>
      <td>{{row.commercial_volume}}</td>
      <td>{{row.industrial_volume}}</td>
    </tr>
    {% endfor %}
  </table>
</div>

<div class="schema" id="otis_transportation" style="display:none">
  <h2>otis_transportation</h2>
  <table class="styled-table">
    <tr>
      <th>zip</th>
      <th>CO2e_total_passenger_vehicles_gasoline_mT_per_year</th>
      <th>CO2e_total_passenger_vehicles_diesel_mT_per_year</th>
      <th>CO2e_total_trucks_gasoline_mT_per_year</th>
      <th>CO2e_total_trucks_diesel_mT_per_year</th>
    </tr>
    {% for row in OTIS_Transportation %}
    <tr>
      <td>{{row.zip}}</td>
      <td>{{row.CO2e_total_passenger_vehicles_gasoline_mT_per_year}}</td>
      <td>{{row.CO2e_total_passenger_vehicles_diesel_mT_per_year}}</td>
      <td>{{row.CO2e_total_trucks_gasoline_mT_per_year}}</td>
      <td>{{row.CO2e_total_trucks_diesel_mT_per_year}}</td>
    </tr>
    {% endfor %}
  </table>
</div>

<div class="schema" id="waste" style="display:none">
  <h2>waste</h2>
  <table class="styled-table">
    <tr>
      <th>zip</th>
      <th>CO2e_MetricTonsPerYear</th>
    </tr>
    {% for row in Waste %}
    <tr>
      <td>{{row.zip}}</td>
      <td>{{row.CO2e_MetricTonsPerYear}}</td>
    </tr>
    {% endfor %}
  </table>
</div>

<div class="schema" id="aviation" style="display:none">
  <h2>aviation</h2>
  <table class="styled-table">
      <tr>
        <th>zip</th>
        <th>CO2e_metricTonsPerYear</th>
      </tr>
      {% for row in Aviation %}
      <tr>
        <td>{{row.zip}}</td>
        <td>{{row.CO2e_metricTonsPerYear}}</td>
      </tr>
      {% endfor %}
    </table>
</div>

<div class="schema" id="zip_pop" style="display:none">
  <h2>zip_pop</h2>
  <table class="styled-table">
    <tr>
      <th>zip_id</th>
      <th>zip</th>
      <th>state</th>
      <th>city</th>
      <th>type</th>
      <th>population2018</th>
      <th>county</th>
    </tr>
    {% for row in Zip_pop %}
    <tr>
      <td>{{row.zip_id}}</td>
      <td>{{row.zip}}</td>
      <td>{{row.state}}</td>
      <td>{{row.city}}</td>
      <td>{{row.type}}</td>
      <td>{{row.population2018}}</td>
      <td>{{row.county}}</td>
    </tr>
    {% endfor %}
  </table>
</div>

  {% endblock %}

